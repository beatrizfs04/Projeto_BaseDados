<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>DIUBI | Create</title>
        <link rel="stylesheet" href="styles">
    </head>
    <body>
        <h1>Criar Dados | UBI</h1>
        <nav>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="ver_dados">Ver Dados</a></li>
                <li><a href="criar_dados" class="selected">Criar Dados</a></li>
                <li><a href="mudar_dados">Mudar Dados</a></li>
                <li><a href="eliminar_dados">Eliminar Dados</a></li>
                <li><a href="ver_creditos">Ver Créditos</a></li>
            </ul>
        </nav>
        <main>
            <h2>Criar Dados</h2>
            <hr><br>
            <div class="escolha">
                <button id="projeto" type="button">Projeto</button>
                <button id="serviço" type="button">Prestação de Serviço</button>
            </div>
            <!--Projeto-->
            <div class="escolhaProjeto">
                <h3>Preencha os seguintes dados para criar um Projeto.</h3>
                <form>
                    Identificador do Projeto: <!--(IdPrestacaoServico)--> 
                    <input type="text"><br>
                    
                    Nome do Projeto: <!--(NomeServiço)--> 
                    <input type="text"><br>
                    
                    Descrição: <!--(Descricao)--> 
                    <textarea></textarea><br>
                    
                    Estado atual: <!--(IdEstado)--> 
                    <select name="Estado" id="estado">
                        <option value="aprovado">aprovado</option>
                        <option value="cancelado">cancelado</option>
                        <option value="concluído">concluído</option>
                        <option value="em curso">em curso</option>
                        <option value="encerrado">encerrado</option>
                        <option value="renovado">renovado</option>
                        <option value="em submissão">em submissão</option>
                    </select><br> 

                    Identificador Responsável: <!--(IdInterno)--> 
                    <input type="text"><br>
                    
                    DataInicio: <!--(IdData)--> 
                    <input type="date"><br>

                    DataFim: <!--(IdData)--> 
                    <input type="date"><br> 

                    Área Científica: <!--(IdArea)--> 
                    <!-- Qual era mesmo a diferença entre o dominio cientifico e a area? -->
                    <select name="AreaCientifica" id="area">
                        <option value="Matemática">Matemática</option>
                        <option value="Informática">Informática</option>
                        <option value="Biologia">Biologia</option>
                        <option value="Artes">Artes</option>
                    </select><br>

                    Domínio Científico: <!--(IdDominio)--> 
                    <!-- Qual era mesmo a diferença entre o dominio cientifico e a area? -->
                    <select name="AreaCientifica" id="area">
                        <option value="Matemática">Matemática</option>
                        <option value="Informática">Informática</option>
                        <option value="Biologia">Biologia</option>
                        <option value="Artes">Artes</option>
                    </select><br>

                    Investigador do Responsável: <!--(IdMembro)--> 
                    <select name="Investigador" id="investigador">
                        <option value=""></option> 
                        <!-- Buscar valores à base de dados -->
                    </select><br>

                    Palavras Chaves Associadas: <!--(Tabela AssociarPalavraChave)--> 
                    <select name="PalavrasChaves" id="chaves">
                        <option value=""></option> 
                        <!-- Buscar valores à base de dados -->
                    </select><br>

                    <br>
                    <b>Equipas</b>
                    Identificador da Equipa(IdEquipa):<br>
                    Membros Associados(IdMembro):<br>
                    
                    <br>
                    <h2>Financiamento</h2>

                    Identificador do Financiamento: <!--(IdFinanciamento)-->
                    <select name="IdentificadorF" id="IdentificadorF">
                        <option value=""></option> <!-- Que tenho de colocar aqui? -->
                    </select><br>

                    Financiador: <!--(IdFinanciador)-->
                    <select name="Financiador" id="financiador">
                        <option value=""></option> 
                        <!-- Buscar valores á base de dados -->
                    </select><br>

                    Tipo Financiamento: <!--(TipoFinanciamento)-->
                    <select name="TipoFinanciamento" id="tipofinanciamento">
                        <option value="Competitivo">Competitivo</option>
                        <option value="naoCompetitivo">Não Competitivo</option>
                    </select><br>
                    
                    Origem Financiamento: <!--(OrigemFinanciamento)-->
                    <select name="OrigemFinanciamento" id="origemfinanciamento">
                        <option value="externo">Externo</option>
                        <option value="interno">Interno</option>
                    </select><br>

                    Valor:<!--(Valor)-->
                    <input type="number"><br>

                    Identificação Custo Elegível(IdCustoElegivel): <br>
                    Valor Atribuído a Equipa(CustoEquipa): <br>
                    Valor Atribuído ao Projeto(CustoProjeto): <br>
                </form>
            </div>

            <!--Prestação de Serviço-->
            <div class="escolhaServiço">
                <h3>Preencha os seguintes dados para criar uma Prestação de Serviço.</h3>

                <form>
                    Identificador da Prestação de Serviço: <!--(IdPrestacaoServico)--> 
                    <input type="text"><br>
                    
                    Nome da Prestação de Serviço: <!--(NomeServiço)--> 
                    <input type="text"><br>
                    
                    Descrição: <!--(Descricao)--> 
                    <textarea></textarea><br>
                    
                    Estado atual: <!--(IdEstado)--> 
                    <select name="Estado" id="estado">
                        <option value="aprovado">aprovado</option>
                        <option value="cancelado">cancelado</option>
                        <option value="concluído">concluído</option>
                        <option value="em curso">em curso</option>
                        <option value="encerrado">encerrado</option>
                        <option value="renovado">renovado</option>
                        <option value="em submissão">em submissão</option>
                    </select><br> 

                    Identificador do Interno Responsável: <!--(IdInterno)--> 
                    <input type="text"><br>
                    
                    DataInicio: <!--(IdData)--> 
                    <input type="date"><br>

                    DataFim: <!--(IdData)--> 
                    <input type="date"><br> 

                    Área Científica: <!--(IdArea)--> 
                    <!-- Qual era mesmo a diferença entre o dominio cientifico e a area? -->
                    <select name="AreaCientifica" id="area">
                        <option value="Matemática">Matemática</option>
                        <option value="Informática">Informática</option>
                        <option value="Biologia">Biologia</option>
                        <option value="Artes">Artes</option>
                    </select><br>

                    Domínio Científico: <!--(IdDominio)--> 
                    <!-- Qual era mesmo a diferença entre o dominio cientifico e a area? -->
                    <select name="AreaCientifica" id="area">
                        <option value="Matemática">Matemática</option>
                        <option value="Informática">Informática</option>
                        <option value="Biologia">Biologia</option>
                        <option value="Artes">Artes</option>
                    </select><br>

                    Investigador Responsável: <!--(IdMembro)--> 
                    <select name="Investigador" id="investigador">
                        <option value=""></option> 
                        <!-- Buscar valores à base de dados -->
                    </select><br>

                    Palavras Chaves Associadas: <!--(Tabela AssociarPalavraChave)--> 
                    <select name="PalavrasChaves" id="chaves">
                        <option value=""></option> 
                        <!-- Buscar valores à base de dados -->
                    </select>

                    <br>
                    <h2>Financiamento</h2>

                    Identificador do Financiamento: <!--(IdFinanciamento)-->
                    <select name="IdentificadorF" id="IdentificadorF">
                        <option value=""></option> <!-- Que tenho de colocar aqui? -->
                    </select><br>

                    Financiador: <!--(IdFinanciador)-->
                    <select name="Financiador" id="financiador">
                        <option value=""></option> 
                        <!-- Buscar valores á base de dados -->
                    </select><br>

                    Tipo Financiamento: <!--(TipoFinanciamento)-->
                    <select name="TipoFinanciamento" id="tipofinanciamento">
                        <option value="Competitivo">Competitivo</option>
                        <option value="naoCompetitivo">Não Competitivo</option>
                    </select><br>
                    
                    Origem Financiamento: <!--(OrigemFinanciamento)-->
                    <select name="OrigemFinanciamento" id="origemfinanciamento">
                        <option value="externo">Externo</option>
                        <option value="interno">Interno</option>
                    </select><br>

                    Valor:<!--(Valor)-->
                    <input type="number">
                </form>

                <!--| Nova Seção |
                    Se tivermos tempo, fazer novas seções para registro de:
                        - Membros
                        - Instituições
                        - Publicações
                        - Palavras Chaves
                        - Registo de Atividades
                        - Domínio Científico
                        - Área Científica
                -->
            </div>
        </main>
        <script src="mudar_divs"></script>
        <script>
            async function fetchProjects() {
              try {
                const response = await fetch('/api/getInvestigadores');
                if (!response.ok) {
                  throw new Error('Network response was not ok');
                }
                const projects = await response.json();
                const dropdown = document.getElementById('investigador');
                projects.forEach(project => {
                  const option = document.createElement('option');
                  option.value = project.IdPessoa;
                  option.text = `${project.IdPessoa} - ${project.PrimeiroNome} ${project.UltimoNome}`;
                  dropdown.add(option);
                });
              } catch (error) {
                console.error('Failed to fetch projects:', error);
              }
            }
        
            // Fetch projects when the page loads
            window.onload = fetchProjects;
        </script>
    </body>
    <script src="index.js"></script>
</html>